# For bash this file is expected at ~/.bash_aliases and for zsh at ~/.zsh_aliases

# Shell commands
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -lah'
# Only where Ghostty is used (not Windows)
if ! uname -a | grep -i microsoft > /dev/null 2>&1; then
    alias c='printf "\e[H\e[22J"' # Clears screen but not scrollback
    alias clear=c
else
    alias c='clear'
fi

# CD that also works with a number argument, that makes it go N directories up in the hierarchy
function cdx() {
    if [[ $1 =~ ^[0-9]+$ ]]; then
        cd $(printf "%0.s../" $(seq 1 $1));
    else
        cd $1;
    fi
}

# Git
run_git_command_if_git_repo() { if git status > /dev/null 2>&1; then git "$@"; else l; fi }
alias gd='run_git_command_if_git_repo diff'
alias gb='run_git_command_if_git_repo branch'
alias gc='run_git_command_if_git_repo checkout'
alias gp='run_git_command_if_git_repo pull'
alias grpo='run_git_command_if_git_repo remote prune origin'
alias s='run_git_command_if_git_repo status'

# Folders
alias dev='cd $HOME/dev'

# Applications
if uname -a | grep -i microsoft > /dev/null 2>&1; then
    alias brave='/mnt/c/Program\ Files/BraveSoftware/Brave-Browser/Application/brave.exe'
elif uname -a | grep -i darwin > /dev/null 2>&1; then
    alias brave='/Applications/Brave\ Browser.app/Contents/MacOS/Brave\ Browser'
# TODO: alias for linux
fi

# PR creation/merging to main from development, named 'wip' in this case. Expects a BRANCH env variable to be defined
alias createpr='git checkout -b $BRANCH; git push origin $BRANCH; git checkout main; git branch -D $BRANCH'
alias prmerged='git pull; git remote prune origin; git checkout wip; git rebase main; git push origin wip --force'

# Mise
alias mr='mise run'